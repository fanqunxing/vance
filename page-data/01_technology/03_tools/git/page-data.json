{"componentChunkName":"component---src-templates-blog-post-js","path":"/01_technology/03_tools/git/","result":{"data":{"site":{"siteMetadata":{"title":"Vance’s Blog"}},"markdownRemark":{"id":"3c6089f9-99e7-5480-84a2-ac82700d5edb","excerpt":"创建 ssh key 检查是否存在 ssh key 如果已经存在 id_rsa.pub 或 id_dsa.pub 说明已经有证书。 新建 ssh key 代码参数含义： -t 指定密钥类型，默认是 rsa ，可以省略。 -C 设置注释文字，比如邮箱。 -f 指定密钥文件存储文件名 然后直接 Enter…","html":"<h3>创建 ssh key</h3>\n<p>检查是否存在 ssh key</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~/.ssh\n<span class=\"token function\">ls</span></code></pre></div>\n<p>如果已经存在 id_rsa.pub 或 id_dsa.pub 说明已经有证书。</p>\n<p>新建 ssh key</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ssh-keygen -t rsa -C <span class=\"token string\">\"your_email@example.com\"</span></code></pre></div>\n<p>代码参数含义：</p>\n<p>-t 指定密钥类型，默认是 rsa ，可以省略。</p>\n<p>-C 设置注释文字，比如邮箱。</p>\n<p>-f 指定密钥文件存储文件名</p>\n<p>然后直接 Enter 就行。</p>\n<h3>查看公钥</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> ~/.ssh/id_rsa.pub</code></pre></div>\n<h3>删除本地分支</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> <span class=\"token function\">git</span> branch -d <span class=\"token operator\">&lt;</span>BranchName<span class=\"token operator\">></span></code></pre></div>\n<h3>创建并切换到分支</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout -b <span class=\"token operator\">&lt;</span>myBranchName<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>fromBrach<span class=\"token operator\">></span></code></pre></div>\n<p>fromBrach 不写默认本分支</p>\n<h3>代码回滚</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset --hard commitId</code></pre></div>\n<h3>合并分支</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> merge origin/master</code></pre></div>\n<p>其中 origin/master 为你要合并过来的分支。</p>\n<h3>终止合并</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> merge --abort</code></pre></div>\n<h3>切换代码源</h3>\n<p>删除原远程分支源</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">rm</span> origin</code></pre></div>\n<p>添加新的远程源</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin 远程仓库地址</code></pre></div>\n<p>然后下面的操作了</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> pull origin master --allow-unrelated-histories\n\n<span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>origin/master master\n\n<span class=\"token function\">git</span> push</code></pre></div>\n<h3>合并不同源的代码</h3>\n<p>查看下源的状态</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote -v</code></pre></div>\n<p>添加另一个源</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> upstream <span class=\"token operator\">&lt;</span>url<span class=\"token operator\">></span></code></pre></div>\n<p>再次查看下配置是否成功</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote -v</code></pre></div>\n<p>同步 upstream 的代码</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> fetch upstream</code></pre></div>\n<p>代码合并到本分支</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> merge upstream/v1.0</code></pre></div>\n<p>提交代码</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push</code></pre></div>\n<h3>变基</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> rebase upstream/v1.0</code></pre></div>\n<p>git rebase 和 git merge 的区别就是 git rebase 依然会保证提交顺序，git merge 会从分支覆盖过来。\n所以 git merge 的提交线是不停的新分支拉出去再合并，而 git rebase 的提交线是一条直线。</p>\n<h3>cherry-pick</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> cherry-pick <span class=\"token operator\">&lt;</span>commitHash<span class=\"token operator\">></span></code></pre></div>\n<p>将这个一笔提交转到当前分支</p>\n<h3>接上一笔提交</h3>\n<p>在上一笔提交中接着提交</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> commit --amend</code></pre></div>\n<p>在上一笔提交中接着提交，覆盖提交用户信息</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> commit --amend --reset-author</code></pre></div>\n<h3>提交合并</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 合并从当前head到15f745b(commit id)</span>\n<span class=\"token function\">git</span> rebase -i 15f745b\n\n<span class=\"token comment\"># 合并最近的两次提交</span>\n<span class=\"token function\">git</span> rebase -i HEAD~2</code></pre></div>\n<p>弹出来修改记录后将 pick 改成 s 就不会有提交记录了。</p>\n<h3>git pull —rebase</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> pull origin master --rebase</code></pre></div>\n<h3>推送代码</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push origin master</code></pre></div>\n<h3>撤销修改</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout -- CONTRIBUTING.md</code></pre></div>\n<h3>命令保存和恢复进度</h3>\n<p>保存当前分支的开发进度</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash</code></pre></div>\n<p>恢复当前分支的开发进度</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash pop</code></pre></div>\n<h3>最后一条 commit 撤回到未提交的状态</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset --soft HEAD^</code></pre></div>\n<h3>远程强制覆盖本地</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> fetch --all\n<span class=\"token function\">git</span> reset --hard origin/分支名\n<span class=\"token function\">git</span> pull</code></pre></div>\n<h3>更改某次提交</h3>\n<p>将 HEAD 移到需要提交的 commit 上</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> rebase 提交ID^ --interactive</code></pre></div>\n<p>然后按 i，进入编辑模式。找到对应的 commit，将首行的 pick 改成 edit，按 esc，按:wq 退出。</p>\n<p>修改的文件</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span> 添加文件到缓存\n\n<span class=\"token function\">git</span> commit --amend 追加提交\n\n<span class=\"token function\">git</span> rebase --continue</code></pre></div>\n<p>冲突解决</p>\n<p>1、编辑冲突文件，解决冲突\n2、git add .\n3、git commit —amend\n4、git rebase —continue</p>\n<h3>反转提交</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> revert <span class=\"token operator\">&lt;</span>commit_id<span class=\"token operator\">></span></code></pre></div>\n<h3>忽略已经提交的文件或文件夹</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> <span class=\"token function\">rm</span> --cached file_path\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">'delete remote somefile'</span>\n<span class=\"token function\">git</span> push</code></pre></div>\n<h3>操作还原</h3>\n<p>有时候提交了一笔由于各种操作导致丢失了。\n1、查找操作记录</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reflog</code></pre></div>\n<p>下面是操作日志：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">31b7aab <span class=\"token punctuation\">(</span>HEAD -<span class=\"token operator\">></span> mine<span class=\"token punctuation\">)</span> HEAD@<span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span>: commit: 添加围棋\n31b7aab <span class=\"token punctuation\">(</span>HEAD -<span class=\"token operator\">></span> mine<span class=\"token punctuation\">)</span> HEAD@<span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span>: commit: 添加围棋\nb6c254f HEAD@<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>: commit: 删除五子棋背景图,加快加载速度\n24ed419 <span class=\"token punctuation\">(</span>origin/mine<span class=\"token punctuation\">)</span> HEAD@<span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span>: commit: 添加几款游戏\n0ecc527 HEAD@<span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span>: commit: 添加中国象棋\n832fe12 HEAD@<span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span>: commit: 添加五子棋游戏</code></pre></div>\n<p>找到自己的那笔提交，然后 reset 下</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset --hard b6c254f</code></pre></div>\n<h3>提交规范</h3>\n<ul>\n<li>feat：新功能（feature）</li>\n<li>fix：修补 bug</li>\n<li>docs：文档（documentation）</li>\n<li>style：格式（不影响代码运行的变动）</li>\n<li>refactor：重构（即不是新增功能，也不是修改 bug 的代码动）</li>\n<li>test：增加测试</li>\n<li>chore：构建过程或辅助工具的变动</li>\n</ul>\n<h3>github 403 的解决办法</h3>\n<p>我使用了是有用的，不知道什么原因</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> config --global --unset http.proxy\n<span class=\"token function\">git</span> config --global --unset https.proxy</code></pre></div>","frontmatter":{"title":"git 常用操作","date":"October 10, 2018","description":"git 常用操作"}},"previous":{"fields":{"slug":"/01_technology/01_client/web/003_自己实现的网络拓扑图/"},"frontmatter":{"title":"自己实现的网络拓扑图"}},"next":{"fields":{"slug":"/01_technology/01_client/web/006_js 上下文总结/"},"frontmatter":{"title":"js 上下文总结"}}},"pageContext":{"id":"3c6089f9-99e7-5480-84a2-ac82700d5edb","previousPostId":"05f53c9e-4941-5092-be9f-3853af1efeef","nextPostId":"1c0cd78e-113a-5657-8a9c-027cf48692ca"}},"staticQueryHashes":["2841359383","3257411868"]}