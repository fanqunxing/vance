{"componentChunkName":"component---src-templates-blog-post-js","path":"/01_technology/01_client/web/005_microApp 的实践/","result":{"data":{"site":{"siteMetadata":{"title":"Vance’s Blog"}},"markdownRemark":{"id":"3e0f346b-37f5-5d5a-8ba7-bf0238c0b5de","excerpt":"一、什么是微前端？ 微前端的概念是由 ThoughtWorks 在 201…","html":"<h2>一、什么是微前端？</h2>\n<blockquote>\n<p>微前端的概念是由 ThoughtWorks 在 2016 年提出的，它借鉴了微服务的架构理念，核心在于将一个庞大的前端应用拆分成多个独立灵活的小型应用，每个应用都可以独立开发、独立运行、独立部署，再将这些小型应用融合为一个完整的应用，或者将原本运行已久、没有关联的几个应用融合为一个应用。微前端既可以将多个项目融合为一，又可以减少项目之间的耦合，提升项目扩展性，相比一整块的前端仓库，微前端架构下的前端仓库倾向于更小更灵活。</p>\n</blockquote>\n<p>它主要解决了两个问题：</p>\n<ol>\n<li>随着项目迭代应用越来越庞大，难以维护。</li>\n<li>跨团队或跨部门协作开发项目导致效率低下的问题。</li>\n</ol>\n<p><strong>当然，如果您还不清楚需不需使用，那就是不需要使用</strong></p>\n<p>我需要使用微前端是由于有两个已经开发好的项目，需要整合在一起，而使用 iframe 打通有需要解决复杂的权限问题且性能也不好，所以就直接使用微前端了。</p>\n<h2>二、怎么实现微前端</h2>\n<p>至少有两种方法</p>\n<ol>\n<li>使用 iframe</li>\n<li>使用微前端框架，比如 microApp</li>\n</ol>\n<p>我之前也使用过阿里的乾坤，感觉不好用。这次看京东的 microApp，确实用起来还可以。</p>\n<h2>三、怎么使用 microApp</h2>\n<h3>1、子应用</h3>\n<h4>1.1 hash 路由</h4>\n<p>准备一个 hash 路由的子应用。</p>\n<h4>1.2 配置可跨域</h4>\n<p>开发环境下，只要配置 <code class=\"language-text\">vue.config.js</code> 就好了</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// vue.config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">devServer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">\"Access-Control-Allow-Origin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>服务器环境配置 nginx，以下提供参考</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">location / <span class=\"token punctuation\">{</span>\n    add_header Access-Control-Allow-Origin *<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nlocation ~ .*<span class=\"token punctuation\">\\</span>.<span class=\"token punctuation\">(</span>gif<span class=\"token operator\">|</span>jpg<span class=\"token operator\">|</span>jpeg<span class=\"token operator\">|</span>png<span class=\"token operator\">|</span>bmp<span class=\"token operator\">|</span>swf<span class=\"token punctuation\">)</span>$\n<span class=\"token punctuation\">{</span>\n    add_header Access-Control-Allow-Origin *<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nlocation ~ .*<span class=\"token punctuation\">\\</span>.<span class=\"token punctuation\">(</span>js<span class=\"token operator\">|</span>css<span class=\"token punctuation\">)</span>?$\n<span class=\"token punctuation\">{</span>\n    add_header Access-Control-Allow-Origin *<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2、主应用</h3>\n<h4>2.1 使用 history 路由</h4>\n<p>这里和子应用配合。</p>\n<h4>2.2 安装使用依赖</h4>\n<p>对于主应用来说只要安装一个依赖</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i @micro-zoe/micro-app --save</code></pre></div>\n<p>然后再使用它就行</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">// index.js\n<span class=\"token function\">import</span> microApp from <span class=\"token string\">'@micro-zoe/micro-app'</span>\n\nmicroApp.start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4>2.3 页面使用</h4>\n<p>以下示例供参考</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>micro-app</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>categories<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8000<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>micro-app</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">created</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 设置子应用的路由</span>\n      window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>hash <span class=\"token operator\">=</span> <span class=\"token string\">\"#/categories\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>","frontmatter":{"title":"microApp 的实践","date":"August 21, 2022","description":"我用过最好用的微前端框架，如果你需要使用微前端，那么这个是最好的选择。"}},"previous":{"fields":{"slug":"/01_technology/02_server/php/mac/apache/"},"frontmatter":{"title":"mac 配置 apache"}},"next":{"fields":{"slug":"/01_technology/03_tools/justmysocks/"},"frontmatter":{"title":"使用 justmysocks"}}},"pageContext":{"id":"3e0f346b-37f5-5d5a-8ba7-bf0238c0b5de","previousPostId":"1306ce21-4844-5a6e-8afe-707d14360869","nextPostId":"036f6467-ca16-58cc-a449-cb9aff334585"}},"staticQueryHashes":["2841359383","3257411868"]}