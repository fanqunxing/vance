{"componentChunkName":"component---src-templates-blog-post-js","path":"/01_technology/02_server/node/dubbo/","result":{"data":{"site":{"siteMetadata":{"title":"Vance’s Blog"}},"markdownRemark":{"id":"aff44c85-48e5-504a-af2b-c3d76e85d1a8","excerpt":"1. apache-dubbo-js node 调用 dubbo，使用工具库：apache-dubbo-js\n代码地址：https://github.com/apache/dubbo-js\nnpm 安装 2. 新建一个 service 3. 创建 dubbo 4. 调用方法 返回的是 promise","html":"<h3>1. apache-dubbo-js</h3>\n<p>node 调用 dubbo，使用工具库：apache-dubbo-js\n代码地址：<a href=\"https://github.com/apache/dubbo-js\">https://github.com/apache/dubbo-js</a>\nnpm 安装</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> apache-dubbo-js</code></pre></div>\n<h3>2. 新建一个 service</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Dubbo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"dubbo-js\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">demoProvider</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">dubbo</span> <span class=\"token operator\">=></span>\n  dubbo<span class=\"token punctuation\">.</span><span class=\"token function\">proxyService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 包路径</span>\n    <span class=\"token literal-property property\">dubboInterface</span><span class=\"token operator\">:</span> <span class=\"token string\">\"org.apache.dubbo.demo.DemoProvider\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 包版本</span>\n    <span class=\"token literal-property property\">version</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 包接口</span>\n    <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 参数转java类型</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>java<span class=\"token punctuation\">.</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> java<span class=\"token punctuation\">.</span><span class=\"token function\">Integer</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">getUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// DTO参数</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n          java<span class=\"token punctuation\">.</span><span class=\"token function\">combine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.apache.dubbo.demo.DTO\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nodejs\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node@test.com\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  demoProvider<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>3. 创建 dubbo</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Dubbo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"dubbo-js\"</span>\n<span class=\"token comment\">// 引入service</span>\n<span class=\"token keyword\">import</span> service <span class=\"token keyword\">from</span> <span class=\"token string\">\"./service\"</span>\n<span class=\"token keyword\">const</span> dubbo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Dubbo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">application</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dubbo-js\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// zookeeper 地址</span>\n  <span class=\"token literal-property property\">register</span><span class=\"token operator\">:</span> <span class=\"token string\">\"localhost:2181\"</span><span class=\"token punctuation\">,</span>\n  service<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>4. 调用方法</h3>\n<p>返回的是 promise</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">dubbo<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>DemoProvider<span class=\"token punctuation\">.</span><span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token string\">'node'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndubbo<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>DemoProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"nodejs 调用 dubbo 接口","date":"May 26, 2021","description":"nodejs 调用 dubbo 接口"}},"previous":{"fields":{"slug":"/01_technology/01_client/web/004_jquery-components介绍/"},"frontmatter":{"title":"jquery 组件化"}},"next":{"fields":{"slug":"/01_technology/02_server/node/call-python/"},"frontmatter":{"title":"nodejs 调用 python"}}},"pageContext":{"id":"aff44c85-48e5-504a-af2b-c3d76e85d1a8","previousPostId":"96123aa2-eb47-5ab6-8b32-6064cd956002","nextPostId":"5aaf5b72-f056-583f-8eaf-55c2ed886885"}},"staticQueryHashes":["2841359383","3257411868"]}