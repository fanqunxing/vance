{"componentChunkName":"component---src-templates-blog-post-js","path":"/01_technology/02_server/node/call-python/","result":{"data":{"site":{"siteMetadata":{"title":"Vance’s Blog"}},"markdownRemark":{"id":"5aaf5b72-f056-583f-8eaf-55c2ed886885","excerpt":"在一些数据分析中，nodejs 需要调用 python 脚本，来获取数据。 例如：使用 python 分词。 核心方法 包装成 promise 使用","html":"<p>在一些数据分析中，nodejs 需要调用 python 脚本，来获取数据。</p>\n<p>例如：使用 python 分词。</p>\n<p>核心方法</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> exec <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"child_process\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>exec\n\n<span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"python3 main.py\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> stdout<span class=\"token punctuation\">,</span> stderr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>stdout<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>包装成 promise 使用</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> exec <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"child_process\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>exec\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getJieba</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"python3 main.py\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> stdout<span class=\"token punctuation\">,</span> stderr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>stdout<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">getJieba</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"nodejs 调用 python","date":"May 28, 2021","description":"在一些数据分析中，nodejs 需要调用 python 脚本，来获取数据。"}},"previous":{"fields":{"slug":"/01_technology/02_server/node/dubbo/"},"frontmatter":{"title":"nodejs 调用 dubbo 接口"}},"next":{"fields":{"slug":"/01_technology/02_server/node/lock/"},"frontmatter":{"title":"乐观锁 (nodejs+mongodb) 实现"}}},"pageContext":{"id":"5aaf5b72-f056-583f-8eaf-55c2ed886885","previousPostId":"aff44c85-48e5-504a-af2b-c3d76e85d1a8","nextPostId":"75bd1994-ba16-510f-9bbf-e4223fa6ae72"}},"staticQueryHashes":["2841359383","3257411868"]}